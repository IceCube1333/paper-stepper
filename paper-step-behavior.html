<link rel="import" href="../polymer/polymer.html">

<script>
  
  window.Zecat = window.Zecat || {};
  /*
@polymerBehavior Zecat.PaperStepBehavior
*/
  Zecat.PaperStepBehavior = {
      properties: {
         saved: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },
        continueText: {
          type: String,
          value: 'CONTINUE'
        },
        skipText: {
          type: String,
          value: 'SKIP'
        },
        editable: {
          type: Boolean,
          value: false
        },
        index: Number,
        linearStepper: {
          type: Boolean,
          value: false
        },
        previousSaved: {
          type: Boolean,
          value: false
        },
        optional: {
          type: Boolean,
          value: false
        },
        selectable: {
          type: Boolean,
          computed: '_computeSelectable(linearStepper, saved, editable, previousSaved)',
          reflectToAttribute: true
        },
        label: {
          type: String,
          value: ''
        },
        opened: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },
        icon: {
          type: String,
          computed: '_computeIcon(saved, editable)'
        }
      },

      observers: [
        '_notifyProgress(saved, previousSaved)'
      ],

      _computeSelectable: function(linearStepper, saved, editable, previousSaved) {
        return (!linearStepper || previousSaved) && (!saved || editable);
      },
      _notifyProgress: function(saved, previousSaved) {
        if (saved && previousSaved) {
          this.fire('progress', this.index);
        }
      },
      _stepLabelTapped: function() {
        if (this.selectable) {
          this.fire('select-step');
        }
      },
      _computeIcon: function(saved, editable) {
        return saved ? ( editable ? 'editor:mode-edit' : 'done' ) : '';
      },
      _computeIsIconBadge: function(icon) {
        return icon.length > 0;
      }
  };

</script>
